# python 核心编程(第三版)2.8节作业

## 2-1 套接字。

>**面向连接的套接字和无连接套接字之间的区别是什么？**

即TCP 与UDP 。
TCP连接会进行握手，并确保双方能准确收到。

UDP不进行握手，直接发送数据，没有确认对方是否收到。

## 2-3 套接字。

>**TCP和UDP中，哪种类型的服务器接受连接，并将他们转换到独立的套接字进行客户端通信？**

TCP会接受连接，并开通新的SOCKET进行数据传输。

## 2-4 客户端。

**更新TCP（tsTclnt.py)和UDP(tsUclnt.py)客户端，以使得服务器名称无需硬编码到应用程序中。此外，应该允许用户指定主机名和端口号，且如果二者中任何一个或者全部参数丢失，那么应该使用默认值。
**
### tsTclnt.py

```python
#!/usr/bin/env python3

from socket import *
deHOST = '10.5.31.28'
dePORT = 21567
BUFSIZ = 1024

HOST = input('HOST>')
PORT = input('PORT>')
if not HOST or not PORT:
    HOST=deHOST
    PORT = dePORT

ADDR = (HOST, PORT)
tcpCliSock = socket(AF_INET, SOCK_STREAM)
tcpCliSock.connect(ADDR)

while True:
    data = input('> ')
    if not data:
        break
    tcpCliSock.send(bytes(data, 'utf-8'))
    data = tcpCliSock.recv(BUFSIZ)
    if not data:
        break
    print(data.decode('utf-8'))

tcpCliSock.close()

```

### tsUclnt.py

```python
#!/usr/bin/env python3

from socket import *

deHOST = '10.5.31.28'
dePORT = 21567
BUFSIZ = 1024
HOST = input('HOST>')
PORT = input('PORT>')
if not HOST or not PORT:
    HOST=deHOST
    PORT = dePORT


ADDR = (HOST, PORT)

udpCliSock = socket(AF_INET, SOCK_DGRAM)

while True:
    data = input('> ')
    if not data:
        break
    udpCliSock.sendto(bytes(data,'utf-8'), ADDR)
    data, ADDR = udpCliSock.recvfrom(BUFSIZ)
    if not data:
        break
    print(data.decode('utf-8'))

udpCliSock.close()


```

## 2-5 网络互联和套接字

>**实现python库参考文档中关于socket模块中的TCP客户端/服务器程序示例，并使其能够正常工作。首先运行服务器，然后启动客户端。也可以在http://docs.python.org/library/socket#example 网址中找到在线源码。**
>
>**如果你觉得示例中服务器的功能太单调，那么可以更新服务器代码，以使它具有更多功能，令其能够识别以下命令。**
>
>**date** 服务器将返回其当前日期/时间戳，即time.ctime()
>
>**os** 获取操作系统信息(os.name)
>
>**ls** 列数当前目录文件清单(提示：os.listdir()列出一个目录，os.curdir是当前目录)。
>选做题：接受ls dir命令，返回dir目录中的文件清单。
>
>**你不需要一个网络来完成这个任务，因为你的计算及可以与自己通信。请注意，在服务器退出之后，在再次运行它之间必须清除它的绑定。否则，可能会遇到“端口已绑定”的错误提示。此外，操作系统通常会在5分钟内清除绑定，所以请耐心等待。**

